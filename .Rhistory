source("R/library.R")
# Esto es solo para ocupar una funcion de la libreria
# movimientos <- readxl::read_excel()
movimientos <- read_excel("data/movimientos.xlsx")
read_excel("data/movimientos.xlsx")
View(movimientos)
View(movimientos)
View(movimientos)
# Filtrar
filter(movimientos,importe > 40)
write_xlsx(importe_menor_a_40, "output/importe_menor_a_40.xlsx")
# Guardemos este resultado
importe_menor_a_40 <- filter(movimientos,importe > 40)
write_xlsx(importe_menor_a_40, "output/importe_menor_a_40.xlsx")
# Veremos de que tipo es un objeto
glimpse(movimientos)
# La clase del objeto
class(movimientos)
# Otra forma de observar el tipo de objeto es
str(movimientos)
filter(movimientos, importe < 40, hora == 12)
1 == 1
a = 1
a
mutate(movimientos, importe_clp = importe*700)
mutate(movimientos, importe_clp = importe*700)
mutate(movimientos, importe_clp = importe*700) %>%
View()
movimientos %>%
filter(importe > 40) %>%
mutate(importe_clp = importe*700) %>%
filter(hora == 12)
movimientos %>%
filter(importe > 40) %>%
mutate(importe_clp = importe*700) %>%
filter(hora == 12) %>%
View()
movimientos %>%
filter(importe > 40) %>%
mutate(importe_clp = importe*700) %>%
filter(hora == 12) %>%
write_xlsx("output/consulta_1.xlsx")
movimientos_2 <- movimientos %>%
filter(importe > 40) %>%
mutate(importe_clp = importe*700) %>%
filter(hora == 12)
movimientos %>%
select(hora, importe)
movimientos %>%
select(hora, importe) %>%
mutate(importe_oferta = importe + 1*hora)
movimientos %>%
select(hora, importe) %>%
mutate(importe_oferta = importe + 1*hora) %>%
mutate(importe_oferta_EUR = importe_oferta*700/750)
movimientos %>%
select(hora, importe) %>%
mutate(importe_oferta = importe + 1*hora) %>%
mutate(importe_oferta_EUR = importe_oferta*700/750)
movimientos %>%
select(hora, importe) %>%
mutate(importe_oferta = importe + 1*hora) %>%
mutate(importe_oferta_EUR = importe_oferta*700/750) %>%
filter(importe_oferta_EUR > 200)
movimientos %>%
select(hora, importe) %>%
mutate(importe_oferta = importe + 1*hora) %>%
mutate(importe_oferta_EUR = importe_oferta*700/750) %>%
filter(importe_oferta_EUR > 200)
movimientos %>%
select(hora, importe) %>%
mutate(importe_oferta = importe + 1*hora) %>%
mutate(importe_oferta_EUR = importe_oferta*700/750) %>%
filter(importe_oferta_EUR > 200)
movimientos %>%
select(hora, importe) %>%
mutate(importe_oferta = importe + 1*hora) %>%
mutate(importe_oferta_EUR = importe_oferta*700/750) %>%
filter(importe_oferta_EUR > 200)
movimientos %>%
select(hora, importe) %>%
mutate(importe_oferta = importe + 1*hora) %>%
mutate(importe_oferta_EUR = importe_oferta*700/750) %>%
filter(importe_oferta_EUR > 200)
movimientos %>%
select(hora, importe) %>%
mutate(importe_oferta = importe + 1*hora) %>%
mutate(importe_oferta_EUR = importe_oferta*700/750) %>%
filter(importe_oferta_EUR > 200)
movimientos %>%
select(hora, importe) %>%
mutate(importe_oferta = importe + 1*hora) %>%
mutate(importe_oferta_EUR = importe_oferta*700/750) %>%
filter(importe_oferta_EUR > 200)
movimientos %>%
select(hora, importe) %>%
mutate(importe_oferta = importe + 1*hora)
movimientos %>%
arrange(desc(importe))
movimientos %>%
arrange(desc(importe)) %>%
View()
movimientos %>%
arrange(desc(importe)) %>%
select(importe)
movimientos %>%
arrange(desc(importe)) %>%
select(importe) %>%
top_n(10)
movimientos %>%
top_n(10)
movimientos %>%
top_n(10) %>%
View()
movimientos %>%
top_n(10, importe) %>%
View()
movimientos %>%
arrange(desc(importe)) %>%
select(importe)
movimientos %>%
top_n(10 , importe)
movimientos %>%
mutate(importe_clp = importe*700) %>%
group_by(actividad) %>%
summarise(
suma_importe = sum(importe_clp),
promedio_hora = mean(hora, importe)
)
movimientos %>%
mutate(importe_clp = importe*700) %>%
group_by(actividad) %>%
summarise(
suma_importe = sum(importe_clp),
promedio_hora = mean(hora)
)
movimientos %>%
mutate(importe_clp = importe*700) %>%
group_by(actividad) %>%
summarise(
suma_importe = sum(importe_clp),
promedio_hora = mean(hora)
) %>%
arrange(desc(suma_importe)) %>%
head(10)
movimientos %>%
mutate(importe_clp = importe*700) %>%
group_by(actividad) %>%
summarise(
suma_importe = sum(importe_clp),
promedio_hora = mean(hora)
) %>%
arrange(desc(suma_importe)) %>%
tail(10)
movimientos %>%
mutate(momento_del_dia = case_when(
hora > 6 & hora < 12 ~ "mañana",
hora >= 12 & hora < 21 ~ "tarde",
TRUE ~ "noche"
))
movimientos
movimientos %>%
mutate(momento_del_dia = case_when(
hora > 6 & hora < 12 ~ "mañana",
hora >= 12 & hora < 21 ~ "tarde",
TRUE ~ "noche"
))
movimientos
movimientos %>%
mutate(
momento_del_dia = case_when(
hora > 6 & hora < 12 ~ "mañana",
hora >= 12 & hora < 21 ~ "tarde",
TRUE ~ "noche"
))
movimientos
movimientos %>%
mutate(
momento_del_dia = case_when(
hora > 6 ~ "mañana",
hora >= 12  ~ "tarde",
TRUE ~ "noche"
))
movimientos %>%
mutate(
momento_del_dia = case_when(
hora > 6 & hora < 12 ~ "mañana",
hora >= 12 & hora < 21 ~ "tarde",
TRUE ~ "noche"
))
momento_del_dia = case_when(
hora > 6 & hora < 12 ~ "mañana",
hora >= 12 & hora < 21 ~ "tarde",
TRUE ~ "noche"
)) %>%
group_by(momento_del_dia) %>%
summarise(suma_importe = sum(importe))
movimientos %>%
mutate(
momento_del_dia = case_when(
hora > 6 & hora < 12 ~ "mañana",
hora >= 12 & hora < 21 ~ "tarde",
TRUE ~ "noche"
)) %>%
group_by(momento_del_dia) %>%
summarise(suma_importe = sum(importe))
# Esto es solo para ocupar una funcion de la libreria
# movimientos <- readxl::read_excel()
movimientos <- read_excel("data/movimientos.xlsx")
movimientos
movimientos %>%
mutate(
momento_del_dia = case_when(
hora > 6 & hora < 12 ~ "mañana",
hora >= 12 & hora < 21 ~ "tarde",
TRUE ~ "noche"
)) %>%
group_by(momento_del_dia) %>%
summarise(suma_importe = sum(importe))
movimientos %>%
dplyr::mutate(
momento_del_dia = case_when(
hora > 6 & hora < 12 ~ "mañana",
hora >= 12 & hora < 21 ~ "tarde",
TRUE ~ "noche"
)) %>%
group_by(momento_del_dia) %>%
summarise(suma_importe = sum(importe))
